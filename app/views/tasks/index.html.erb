<%= javascript_include_tag("complete_task") %> 

<div class="flex flex-col w-full my-20 mx-28">
  <h1 class="text-3xl font-medium font-sans text-zinc-800">
    Tasks
  </h1>

  <ul class="flex flex-col gap-14 mt-8 w-full">
    <% @tasks.each do |task| %>
      <li class="flex flex-row gap-6 w-full items-start" id="task__<%=task.id %>">

        <%= form_for task, remote: true, html: { data: { task_id: task.id } } do |f| %>
          <%= f.check_box :completed, { onchange: "completeTask(this.form);", 
                                        class: "mt-3 w-5 h-5 border-zinc-700 border-2" } %>
          <%= token_tag(nil) %>
        <% end %>

        <div class="flex flex-col w-[40%]">
          <div class="font-bold text-2xl font-sans text-zinc-800">
            <%= task.title %>
          </div>
          <div class="font-normal text-xl font-sans text-zinc-500">
            <%= task.subtitle %>
          </div>
        </div>

        <% 
          priority_style = case task.priority
          when "low"
            "bg-green-100 text-green-500"
          when "medium"
            "bg-orange-100 text-orange-400"
          when "high"
            "bg-red-100 text-red-500"
          end
        %> 
        <div class="flex w-[15%] mt-3 justify-center items-center rounded-3xl p-2.5 font-bold text-sm saturate-[0.6] <%= priority_style %>">
          <%= "#{task.priority.upcase} PRIORITY" %>
        </div>

        <div class="w-[30%] mt-3 rounded-3xl p-2 font-medium text-base text-zinc-500 bg-zinc-100 flex gap-x-3 justify-center items-center">
          <%= render inline: Rails.root.join('public/alarm.svg').read %>
          <%= task.due_date.strftime("%a, %d %b %Y, %l:%M%P") %>
        </div>

      </li>
    <% end %>
  </ul>
</div>


